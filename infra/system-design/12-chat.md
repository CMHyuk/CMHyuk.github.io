### 채팅 시스템 설계

### 문제 이해 및 설계 범위 확정
* 페이스북 메신저, 위챗, 왓츠앱처럼 1:1 채팅에 집중하는 앱들이 있는가 하면 슬랙 같은 그룹 채팅에 중점을 둔 업무용 앱이나, 게임 채팅에 쓰는 디스코드 같은 대규모 그룹의 소통과 응답지연이 낮은 음성 채팅에 집중하는 앱도 있다.
* 기능 요구 사항
  * 응답지연이 낮은 일대일 채팅 기능
  * 최대 100명까지 참여할 수 있는 그룹 채팅 기능
  * 사용자의 접속상태 표시 기능
  * 다양한 단말 지원. 하나의 계정으로 여러 단말에 동시 접속 지원
  * 푸시 알림

---

### 개략적 설계안 제시 및 동의 구하기
* 채팅 시스템의 경우 클라이언트는 모바일 앱이거나 웹 애플리케이션이다. 클라이언트는 서로 통신하지 않는다.

![chat](../../image/chat-1.png)

* 프로토콜
  * 통신 클라이언트가 채팅 서비스에 메시지를 보낼 때 HTTP 프로토콜을 사용한다. 
  * 초기 페이스 북 메세지 앱의 송신 클라이언트는 서버에 HTTP 프로토콜을 이용해 수신 클라이언트에게 보낼 메세지를 정한다. 이 때 keep-alive 헤더를 사용하면 TCP 핸드쉐이크 횟수를 줄일 수 있다. 
  * HTTP는 클라이언트가 연결을 만드는 프로토콜이며, 서버에서 수신 클라이언트에 임의 시점에 메세지를 보낼 때는 사용하기 어렵기 때문에, 폴링, 롱 폴링, 웹소켓 등이 쓰이고 있다.
* 폴링
  * 폴링은 수신 클라이언트가 서버에게 주기적으로 새 메세지가 있는지 물어보는 방법이다. 
  * 실제 주고 받는 글이 없음에도 불구하고 클라이언트에서 폴링이 없기 때문에 서버 자원이 불필요하게 낭비될 수 있다.

![chat](../../image/chat-2.png)