### 알림 시스템 설계

* 알림 시스템은 단순히 모바일 푸시 알림에 한정되지 않는다.
* 알림 시스템은 모바일 푸시 알림, SMS 메시지, 이메일 세 가지로 분류할 수 있다.

**문제 이해 및 설계 범위 확정**

* 하루에 백만 건 이상의 알림을 처리하는 확장성 높은 시스템을 구축하는 게 쉬운 과제는 아니다.
* 알림 시스템이 어떻게 구현되는지에 대한 깊은 이해가 필요하고, 면접에 출제될 때는 문제 자체가 모호하게 주어지므로 적절한 질문을 통해 알아내야 한다.
    * 요구 사항
        * 푸시 알림, SMS 메세지, 이메일을 지원해야한다.
        * 연성 실시간 시스템이고 높은 부하가 걸렸을 때 약간의 지연은 무방하다.
        * iOS 단말, 안드로이드 단말, 랩톱/데스크톱을 지원 해야한다.
        * 클라이언트 애플리케이션 프로그램이 알림을 만들 수 있고, 서버 측에서 스케줄링 할 수도 있다.
        * 사용자가 알림을 받지 않도록 설정할 수도 있어야 한다.
        * 하루에 천만 건의 모바일 푸시 알림, 백만 건의 SMS 메시지, 5백만 건의 이메일을 보낼 수 있어야 한다.

---

### 개략적 설계안 제시 및 동의 구하기

**iOS 푸시 알림**
* 알림 제공자: 알림 요청을 만들어 애플 푸시 알림 서비스(APNS: Apple Push Notification Service)로 보내는 주체다.
* 알림 요청을 만들려면 다음과 같은 데이터가 필요하다.
    * 단말 토큰: 알림 요청을 보내는 데 필요한 고유 식별자다.
    * 페이로드: 알림 내용을 담은 JSON 딕셔너리다. 아래는 그 예다.
```json
{
   "aps":{
      "alert":{
         "title":"Game Request",
         "body":"Bob wants to play chess",
         "action-loc-key":"PLAY"
      },
      "badge"5
   }
}
```
* APNS: 애플이 제공하는 원격 서비스다. 푸시 알림을 iOS 장치로 보내는 역할을 담당한다.
* iOS 단말: 푸시 알림을 수신하는 사용자 단말이다.

**안드로이드 푸시 알림**
* 안드로이드 푸시 알림도 비슷한 절차로 전송된다. APNS 대신 FCM(Firebase Cloud Messaging)을 사용한다는 점만 다르다.

**SMS 메시지**
* SMS 메시지를 보낼 때는 보통 트윌리오, 넥스모같은 제 3사업자의 서비스를 많이 이용한다. 이런 서비스는 대부분 상용 서비스라서 이용요금을 내야한다.

**이메일**
* 대부분의 회사는 고유 이메일 서버를 구축할 역량은 갖추고 있다.
* 그럼에도 많은 회사가 상용 이메일 서비스를 이용한다. 그중 유명한 서비스로 센드그리드, 메일침프가 있다. 전송 성공률도 높고, 데이터 분석 서비스도 제공한다.
