## 스레드를 많이 쓸수록 성능에 좋을까?

스레드를 많이 쓰면 쓸수록 동시에 더 많은 작업들을 실행할 수 있어서 애플리케이션의 성능이 전체적으로 좋아질 것 같다

**‘해당 애플리케이션은 더 작은 작업들로 잘게 쪼개서 동시에 실행이 가능한 성격의 애플리케이션’** 경우는 성능 향상

#### But?

잘게 쪼개서 동시에 실행하기에 매우 어려운 성격의 애플리케이션이라면 스레드를 많이 쓰려고 해도 실제로 사용할 수 있는 수는 한계가 있음 → 별 이점이 없음

#### 컨텍스트 스위칭 관점

코어에서 실행되던 스레드가 다른 스레드로 바뀔 때마다 CPU 코어에서 작업됨 즉, 코어에서 스위칭 작업을 처리하는 동안에는 애플리케이션 코드가 실행되지 않음 이때 스위칭 작업을 위해 소비되는 CPU time은 애플리케이션과 직접적인 관련은 없지만 멀티스레딩으로 동작하기 위해 필요함 → 오버헤드 = 간접 비용

결국 스레드 수를 계속 늘리면 어느 순간에는 오버헤드 때문에 성능 면에서도 한계에 부딪힘

#### CPU, I/O bound 관점

**CPU bound**는 CPU를 많이 쓰기 때문에 코어 수와 비슷한 수준 이상으로 스레드 수를 늘려봤자 별 이점이 없음 오히려 각 코어에서 경합하는 스레드가 많아질 수록 컨텍스트 스위칭 때문에 오버헤드만 더 많아져서 성능에 안 좋음

**I/O bound**는 CPU가 놀고 있는 시간이 많음 코어 수보다 스레드 수를 늘려주는 것(적당히)이 오버헤드가 좀 더 늘긴 해도 코어들을 더 효율적으로 쓸 수 있기 때문에 성능에 좋음